<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB | 薛定猫的……饿!</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Hello, My Friend!">
    <meta name="author" content="叶江怀">
    <meta name="keyword" content="Mr.Ye's blog">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/icon-72x72.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.bb2274cf.css" as="style"><link rel="preload" href="/assets/js/app.7fe1ffb5.js" as="script"><link rel="preload" href="/assets/js/3.788743b5.js" as="script"><link rel="preload" href="/assets/js/1.29b2523c.js" as="script"><link rel="preload" href="/assets/js/42.4096bff8.js" as="script"><link rel="preload" href="/assets/js/14.37268bde.js" as="script"><link rel="prefetch" href="/assets/js/10.33e8fcae.js"><link rel="prefetch" href="/assets/js/11.58b0f855.js"><link rel="prefetch" href="/assets/js/12.d3d77849.js"><link rel="prefetch" href="/assets/js/13.da3b5997.js"><link rel="prefetch" href="/assets/js/15.366b6647.js"><link rel="prefetch" href="/assets/js/16.f6b1eeee.js"><link rel="prefetch" href="/assets/js/17.222b11e7.js"><link rel="prefetch" href="/assets/js/18.db7714f6.js"><link rel="prefetch" href="/assets/js/19.abccbbff.js"><link rel="prefetch" href="/assets/js/20.5a4e2a5d.js"><link rel="prefetch" href="/assets/js/21.db579749.js"><link rel="prefetch" href="/assets/js/22.6e5ca0f3.js"><link rel="prefetch" href="/assets/js/23.7c52708f.js"><link rel="prefetch" href="/assets/js/24.835ec374.js"><link rel="prefetch" href="/assets/js/25.70563461.js"><link rel="prefetch" href="/assets/js/26.1995e34c.js"><link rel="prefetch" href="/assets/js/27.7666d8db.js"><link rel="prefetch" href="/assets/js/28.b57e0511.js"><link rel="prefetch" href="/assets/js/29.fc21b11c.js"><link rel="prefetch" href="/assets/js/30.0a45186f.js"><link rel="prefetch" href="/assets/js/31.d2a230f4.js"><link rel="prefetch" href="/assets/js/32.2ab47593.js"><link rel="prefetch" href="/assets/js/33.e26ea18c.js"><link rel="prefetch" href="/assets/js/34.bc2f6ee5.js"><link rel="prefetch" href="/assets/js/35.b15a63ef.js"><link rel="prefetch" href="/assets/js/36.2579a938.js"><link rel="prefetch" href="/assets/js/37.80927296.js"><link rel="prefetch" href="/assets/js/38.5dd089f0.js"><link rel="prefetch" href="/assets/js/39.d1bf6b7c.js"><link rel="prefetch" href="/assets/js/4.d7a1e803.js"><link rel="prefetch" href="/assets/js/40.4baad75c.js"><link rel="prefetch" href="/assets/js/41.e8e5ba3c.js"><link rel="prefetch" href="/assets/js/43.bfae162b.js"><link rel="prefetch" href="/assets/js/44.231c106f.js"><link rel="prefetch" href="/assets/js/45.722fe00e.js"><link rel="prefetch" href="/assets/js/46.dbb87c4c.js"><link rel="prefetch" href="/assets/js/47.16206d7e.js"><link rel="prefetch" href="/assets/js/48.5f25d14c.js"><link rel="prefetch" href="/assets/js/49.ca5f1892.js"><link rel="prefetch" href="/assets/js/5.26ede9a1.js"><link rel="prefetch" href="/assets/js/50.ce3da0ea.js"><link rel="prefetch" href="/assets/js/51.212abfe1.js"><link rel="prefetch" href="/assets/js/52.9824f466.js"><link rel="prefetch" href="/assets/js/53.834d6860.js"><link rel="prefetch" href="/assets/js/54.1b0bc714.js"><link rel="prefetch" href="/assets/js/55.53342e5e.js"><link rel="prefetch" href="/assets/js/56.0b8fa9a4.js"><link rel="prefetch" href="/assets/js/57.b4beac92.js"><link rel="prefetch" href="/assets/js/58.0cc5679f.js"><link rel="prefetch" href="/assets/js/59.b049f1a2.js"><link rel="prefetch" href="/assets/js/6.595dc63e.js"><link rel="prefetch" href="/assets/js/60.f71c42e1.js"><link rel="prefetch" href="/assets/js/61.b791ae63.js"><link rel="prefetch" href="/assets/js/62.45adf481.js"><link rel="prefetch" href="/assets/js/63.f9b5a2c5.js"><link rel="prefetch" href="/assets/js/64.032d3992.js"><link rel="prefetch" href="/assets/js/65.3c66b2ae.js"><link rel="prefetch" href="/assets/js/66.d60e26e5.js"><link rel="prefetch" href="/assets/js/67.b29e161f.js"><link rel="prefetch" href="/assets/js/68.34683a43.js"><link rel="prefetch" href="/assets/js/69.c633f73f.js"><link rel="prefetch" href="/assets/js/7.de304bbe.js"><link rel="prefetch" href="/assets/js/70.b99ee51d.js"><link rel="prefetch" href="/assets/js/71.b8e16fe4.js"><link rel="prefetch" href="/assets/js/72.126c91c0.js"><link rel="prefetch" href="/assets/js/73.d11c2027.js"><link rel="prefetch" href="/assets/js/74.d905ea46.js"><link rel="prefetch" href="/assets/js/75.7aa16953.js"><link rel="prefetch" href="/assets/js/76.3babcf0c.js"><link rel="prefetch" href="/assets/js/77.123f8522.js"><link rel="prefetch" href="/assets/js/78.01eddb07.js"><link rel="prefetch" href="/assets/js/79.adfd6ccb.js"><link rel="prefetch" href="/assets/js/8.95a77bd0.js"><link rel="prefetch" href="/assets/js/80.3e5f5aec.js"><link rel="prefetch" href="/assets/js/81.de79470c.js"><link rel="prefetch" href="/assets/js/82.18020199.js"><link rel="prefetch" href="/assets/js/83.68d39dbc.js"><link rel="prefetch" href="/assets/js/9.6447d90b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bb2274cf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>薛定猫的……饿!</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>叶江怀</span>
            
          <span data-v-64685f0e>2020 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="薛定猫的……饿!" class="logo"> <span class="site-name">薛定猫的……饿!</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      技术相关
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/Javascript/" class="nav-link"><i class="iconfont undefined"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/react/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/categories/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/data_structure/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/database/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://yejianghuai.github.io/nav/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-category"></i>
  导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/resume/" class="nav-link"><i class="iconfont undefined"></i>
  简历
</a></div><div class="nav-item"><a href="https://juejin.im/user/5c9c1b7d6fb9a070bd59b1bc/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/yejianghuai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    叶江怀
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>51</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>27</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      技术相关
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li><li class="dropdown-item"><!----> <a href="/categories/Javascript/" class="nav-link"><i class="iconfont undefined"></i>
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="iconfont undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/react/" class="nav-link"><i class="iconfont undefined"></i>
  React
</a></li><li class="dropdown-item"><!----> <a href="/categories/node/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/categories/data_structure/" class="nav-link"><i class="iconfont undefined"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/categories/database/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/other/" class="nav-link"><i class="iconfont undefined"></i>
  其他
</a></li></ul></div></div><div class="nav-item"><a href="https://yejianghuai.github.io/nav/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-category"></i>
  导航
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/docs/resume/" class="nav-link"><i class="iconfont undefined"></i>
  简历
</a></div><div class="nav-item"><a href="https://juejin.im/user/5c9c1b7d6fb9a070bd59b1bc/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/yejianghuai" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>MongoDB</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>叶江怀</span>
            
          <span data-v-64685f0e>2020 - </span>
          2021
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>MongoDB</h1> <hr> <div data-v-aa64b9d0><i class="iconfont reco-account" data-v-aa64b9d0><span data-v-aa64b9d0>叶江怀</span></i> <i class="iconfont reco-date" data-v-aa64b9d0><span data-v-aa64b9d0>2019-08-18</span></i> <!----> <i class="iconfont reco-tag tags" data-v-aa64b9d0><span class="tag-item" data-v-aa64b9d0>MongoDB</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div id="boxx" data-v-e16ac808><div data-v-e16ac808><p v-if="true" class="custom-block-title" data-v-e16ac808></p> <p v-if="true" data-v-e16ac808></p></div></div> <h1 id="mongodb-的操作符大全"><a href="#mongodb-的操作符大全" class="header-anchor">#</a> MongoDB 的操作符大全</h1> <h1 id="_1-查询和投影"><a href="#_1-查询和投影" class="header-anchor">#</a> 1.查询和投影</h1> <h2 id="_1-1-比较操作符"><a href="#_1-1-比较操作符" class="header-anchor">#</a> 1.1 比较操作符</h2> <h3 id="eq"><a href="#eq" class="header-anchor">#</a> $eq</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $eq<span class="token operator">:</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配等于（=）指定值的文档
举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>查询 age=20 的文档：</li> <li>db.person.find( { age: { $eq: 20 } } )</li> <li>相当于：</li> <li>db.person.find( { age: 20 } )</li></ol></blockquote> <h3 id="gt"><a href="#gt" class="header-anchor">#</a> $gt</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>$gt<span class="token operator">:</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配大于（&gt;）指定值的文档</p></blockquote> <h3 id="gte"><a href="#gte" class="header-anchor">#</a> $gte</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>$gte<span class="token operator">:</span> value<span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配大于等于（&gt;=）指定值的文档</p></blockquote> <h3 id="lt"><a href="#lt" class="header-anchor">#</a> $lt</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>$lt<span class="token operator">:</span> value<span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配小于（&lt;）指定值的文档</p></blockquote> <h3 id="lte"><a href="#lte" class="header-anchor">#</a> $lte</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $lte<span class="token operator">:</span> value<span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配小于等于（&lt;=）指定值的文档</p></blockquote> <h3 id="ne"><a href="#ne" class="header-anchor">#</a> $ne</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>$ne<span class="token operator">:</span> value<span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配不等于（≠）指定值的文档</p></blockquote> <h3 id="in"><a href="#in" class="header-anchor">#</a> $in</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token operator">&lt;</span>valueN<span class="token operator">&gt;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：匹配数组中的任一值</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询该集合中字段 qty 的值与数组中的任意值相等的文档：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>inventory<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> qty<span class="token operator">:</span> <span class="token punctuation">{</span> $<span class="token keyword">in</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote></blockquote> <h3 id="nin"><a href="#nin" class="header-anchor">#</a> $nin</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $nin<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span> <span class="token operator">...</span> <span class="token operator">&lt;</span>valueN<span class="token operator">&gt;</span> <span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：不匹配数组中的值</p></blockquote> <h2 id="_1-2-逻辑操作符"><a href="#_1-2-逻辑操作符" class="header-anchor">#</a> 1.2 逻辑操作符</h2> <h3 id="or"><a href="#or" class="header-anchor">#</a> $or</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> $or<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression1<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression2<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expressionN<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：或 条件查询</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询 age&lt;20 或者 address 是 beijing 的文档：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> $or<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token punctuation">{</span> $lt<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> address<span class="token operator">:</span> <span class="token string">&quot;beijing&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote></blockquote> <h3 id="and"><a href="#and" class="header-anchor">#</a> $and</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> $and<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression1<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression2<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expressionN<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：与 条件查询</p></blockquote> <h3 id="not"><a href="#not" class="header-anchor">#</a> $not</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $not<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>operator<span class="token operator">-</span>expression<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：查询与表达式不匹配的文档</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询 age 不大于 20 的文档：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token punctuation">{</span> $not<span class="token operator">:</span> <span class="token punctuation">{</span> $gt<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="nor"><a href="#nor" class="header-anchor">#</a> $nor</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> $nor<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression1<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expression2<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>expressionN<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：查询与任一表达式都不匹配的文档</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询 age 既不等于 20，sex 也不是男的文档：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> $nor<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> sex<span class="token operator">:</span> <span class="token string">&quot;男&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_1-3-元素操作符"><a href="#_1-3-元素操作符" class="header-anchor">#</a> 1.3 元素操作符</h2> <h3 id="exists"><a href="#exists" class="header-anchor">#</a> $exists</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $exists<span class="token operator">:</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：查询存在指定字段的文档</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询存在 phone 字段的文档：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> phone<span class="token operator">:</span> <span class="token punctuation">{</span> $exists<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="type"><a href="#type" class="header-anchor">#</a> $type</h3> <blockquote><p>语法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $type<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token constant">BSON</span> type number<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>String alias<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>释义：查询类型为指定类型的文档，3.2 版本添加 alias 别名，各种类型的 Number 及 Alias 如下</p> <p><img src="https://img-blog.csdn.net/20170228154236567?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMTYzMTMzNjU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="img"></p> <blockquote><blockquote><p>举例：</p> <p>假设存在这样一个集合：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>{ &quot;_id&quot;: 1, address: &quot;2030 Martian Way&quot;,zipCode: &quot;90698345&quot;},</li> <li>{ &quot;_id&quot;: 2, address: &quot;156 Lunar Place&quot;,zipCode: 43339374},</li> <li>{ &quot;_id&quot;: 3, address: &quot;2324 Pluto Place&quot;,zipCode: NumberLong(3921412)},</li> <li>{ &quot;_id&quot;: 4, address: &quot;55 Saturn Ring&quot;, zipCode: NumberInt(88602117)}</li></ol> <p>查询该集合中 zipCode 字段的数据类型为 String 类型的文档：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>addressBook<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> zipCode<span class="token operator">:</span> <span class="token punctuation">{</span> $type<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>addressBook<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> zipCode<span class="token operator">:</span> <span class="token punctuation">{</span> $type<span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h2 id="_1-4-评估操作符（evaluation，不知道翻译成什么合适，暂且翻译成这样吧）"><a href="#_1-4-评估操作符（evaluation，不知道翻译成什么合适，暂且翻译成这样吧）" class="header-anchor">#</a> 1.4 评估操作符（Evaluation，不知道翻译成什么合适，暂且翻译成这样吧）</h2> <h3 id="mod"><a href="#mod" class="header-anchor">#</a> $mod</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> \$mod<span class="token operator">:</span> <span class="token punctuation">[</span> 除数<span class="token punctuation">,</span> 余数 <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：取余条件查询</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查询 age 字段的值除以 2 余 0 的文档：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token punctuation">{</span> \$mod<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="regex"><a href="#regex" class="header-anchor">#</a> $regex</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $regex<span class="token operator">:</span> <span class="token regex">/pattern/</span><span class="token punctuation">,</span> $options<span class="token operator">:</span> <span class="token string">'&lt;options&gt;'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $regex<span class="token operator">:</span> <span class="token string">'pattern'</span><span class="token punctuation">,</span> $options<span class="token operator">:</span> <span class="token string">'&lt;options&gt;'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> \$regex<span class="token operator">:</span> <span class="token operator">/</span>pattern<span class="token operator">/</span><span class="token operator">&lt;</span>options<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：正则表达式查询</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>db.products.find( { sku: { $regex: /^ABC/i } } )</li></ol></blockquote> <h3 id="text"><a href="#text" class="header-anchor">#</a> $text</h3> <blockquote><p>语法：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
 ​ \$text<span class="token operator">:</span> <span class="token punctuation">{</span>
 ​ \$search<span class="token operator">:</span> <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span>
 ​ \$language<span class="token operator">:</span> <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span>
 ​ \$caseSensitive<span class="token operator">:</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span><span class="token punctuation">,</span>
 ​ \$diacriticSensitive<span class="token operator">:</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>
 ​ <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><blockquote><ul><li><ul><li>$search ——关键词</li> <li>$language ——语言，不支持中文！！！支持语言如下：<a href="https://docs.mongodb.com/manual/reference/text-search-languages/#text-search-languages" target="_blank" rel="noopener noreferrer">点击<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>$caseSensitive——是否区分大小写，默认 false</li> <li>$diacriticSensitive——是否区分读音，默认 false</li></ul></li></ul> <blockquote><p>释义：文本索引查询</p> <p>举例：较为复杂，请参考官网</p></blockquote> <h3 id="where"><a href="#where" class="header-anchor">#</a> $where</h3> <blockquote><p>释义：把一个含有 JavaScript 表达式的字符串或者是整个 JavaScript 函数转换到查询系统中，对内嵌文档不起作用</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>myCollection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \$where<span class="token operator">:</span> <span class="token string">&quot;this.credits == this.debits&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>myCollection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  \<span class="token function-variable function">$where</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">.</span>credits <span class="token operator">==</span> obj<span class="token punctuation">.</span>debits<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><blockquote><h2 id="_1-5-geospatial-query-operators"><a href="#_1-5-geospatial-query-operators" class="header-anchor">#</a> 1.5 Geospatial Query Operators</h2> <p>请参考官网</p> <h2 id="_1-6-数组操作符"><a href="#_1-6-数组操作符" class="header-anchor">#</a> 1.6 数组操作符</h2> <h3 id="all"><a href="#all" class="header-anchor">#</a> $all</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span> field <span class="token operator">&gt;</span>： <span class="token punctuation">{</span> \$ all ： <span class="token punctuation">[</span> <span class="token operator">&lt;</span> value1 <span class="token operator">&gt;</span> ， <span class="token operator">&lt;</span> value2 <span class="token operator">&gt;</span> <span class="token operator">...</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：匹配文档的数组字段中包含所有指定元素的文档</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  查询 articles 集合中 tags 字段（是个数组）包含“ssl”和“security”的文档（包含，但并不是全部等于）</span>
db<span class="token punctuation">.</span>articles<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> tags<span class="token operator">:</span> <span class="token punctuation">{</span> \$all<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;ssl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;security&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><h3 id="elemmatch（query）"><a href="#elemmatch（query）" class="header-anchor">#</a> $elemMatch（query）</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> \$elemMatch<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>query1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>query2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：匹配内嵌文档或数组中的部分 field</p> <p>举例：</p> <p>假设现有集合：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> results<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">88</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> results<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">89</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><blockquote><p>查询 results 数组中含有区间[80,85)元素的文档（结果为第一条）：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>scores<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> results<span class="token operator">:</span> <span class="token punctuation">{</span> $elemMatch<span class="token operator">:</span> <span class="token punctuation">{</span> $gte<span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> \$lt<span class="token operator">:</span> <span class="token number">85</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="size"><a href="#size" class="header-anchor">#</a> $size</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> \$size<span class="token operator">:</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：匹配数组长度为指定大小的文档</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  查询已经集齐了 5 张福卡的文档：</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> card<span class="token operator">:</span> <span class="token punctuation">{</span> \$size<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><h2 id="_1-7-bitwise-query-operators"><a href="#_1-7-bitwise-query-operators" class="header-anchor">#</a> 1.7 Bitwise Query Operators</h2> <p>请参考官网</p> <h2 id="_1-8-投影操作符"><a href="#_1-8-投影操作符" class="header-anchor">#</a> 1.8 投影操作符</h2> <h3 id="projection"><a href="#projection" class="header-anchor">#</a> $(projection)</h3> <blockquote><p>释义：查询数组中首个匹配条件的元素，相当于 findOne()方法</p> <p>举例：</p> <p>假设现有如下集合 students：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">92</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">80</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">92</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&quot;semester&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">95</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">96</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><blockquote><p>查询 semester=1，并且 grades 中符合大于等于 85 的元素的第一个元素：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>db.students.find( { semester: 1, grades: { $gte: 85 } },{ &quot;grades.$&quot;: 1 } )</li></ol> <p>返回如下结果：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">87</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">90</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;grades&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">85</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="elemmatch-projection"><a href="#elemmatch-projection" class="header-anchor">#</a> $elemMatch(projection)</h3> <blockquote><p>释义：用于数组或内嵌文档中的元素匹配（子元素匹配），只会返回匹配的第一个元素！！！</p> <p>举例：</p> <p>假设现有如下集合：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
 \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
 zipcode<span class="token operator">:</span> <span class="token string">&quot;63109&quot;</span><span class="token punctuation">,</span>
 students<span class="token operator">:</span> <span class="token punctuation">[</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;john&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">102</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jess&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">102</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;jeff&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">108</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span>
 ​ <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">{</span>
 \_id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
 zipcode<span class="token operator">:</span> <span class="token string">&quot;63110&quot;</span><span class="token punctuation">,</span>
 students<span class="token operator">:</span> <span class="token punctuation">[</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;ajax&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;achilles&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
 <span class="token punctuation">{</span>
 \_id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
 zipcode<span class="token operator">:</span> <span class="token string">&quot;63109&quot;</span><span class="token punctuation">,</span>
 students<span class="token operator">:</span> <span class="token punctuation">[</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;ajax&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;achilles&quot;</span><span class="token punctuation">,</span> school<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
 ​ <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><blockquote><blockquote><p>查询 zipcode 为 63109 并且 students 数组中 school=102 的文档：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>schools<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> zipcode<span class="token operator">:</span> <span class="token string">&quot;63109&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> students<span class="token operator">:</span> <span class="token punctuation">{</span> \$elemMatch<span class="token operator">:</span> <span class="token punctuation">{</span> school<span class="token operator">:</span> <span class="token number">102</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><blockquote><blockquote><p>返回如下结果：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;students&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;school&quot;</span> <span class="token operator">:</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="meta"><a href="#meta" class="header-anchor">#</a> $meta</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$meta<span class="token operator">:</span> <span class="token operator">&lt;</span>metaDataKeyword<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：请参考官网</p></blockquote> <h3 id="slice-projection"><a href="#slice-projection" class="header-anchor">#</a> $slice(projection)</h3> <blockquote><p>释义：在查询中将数组进行切片（类似于分页）</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  （1）查询结果中，对于 comments 数组的元素只显示前 5 个：</span>
db<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> comments<span class="token operator">:</span> <span class="token punctuation">{</span> \$slice<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  （2）查询结果中，对于 comments 数组的元素只显示后 5 个：</span>
db<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> comments<span class="token operator">:</span> <span class="token punctuation">{</span> \$slice<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  （3）查询结果中，对于 comments 数组的元素跳过（skip）前 20 个，并只显示（limit）10 个元素（即 21-30）：</span>
db<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> comments<span class="token operator">:</span> <span class="token punctuation">{</span> \$slice<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  （4）同理，跳过后 20 个，并显示 10 个：</span>
db<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> comments<span class="token operator">:</span> <span class="token punctuation">{</span> \$slice<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><blockquote><h1 id="_2-更新操作符"><a href="#_2-更新操作符" class="header-anchor">#</a> 2.更新操作符</h1> <h2 id="_2-1-字段更新"><a href="#_2-1-字段更新" class="header-anchor">#</a> 2.1 字段更新</h2> <h3 id="inc"><a href="#inc" class="header-anchor">#</a> $inc</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$inc<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>amount1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>field2<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>amount2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：将文档中的某个 field 对应的 value 自增/减某个数字 amount</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 将\_id 为 1 的文档的 age 字段在原来的基础上+1：</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$inc<span class="token operator">:</span> <span class="token punctuation">{</span> age<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><h3 id="mul"><a href="#mul" class="header-anchor">#</a> $mul</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$mul<span class="token operator">:</span> <span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：将文档中的某个 field 对于的 value 做乘法操作</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// &lt;!-- 将\_id 为 1 的文档的 price 值乘以 1.25 并更新： --&gt;</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$mul<span class="token operator">:</span> <span class="token punctuation">{</span> price<span class="token operator">:</span> <span class="token number">1.25</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><h3 id="rename"><a href="#rename" class="header-anchor">#</a> $rename</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>\$rename<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>newName1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>field2<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>newName2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：重命名文档中的指定字段的名</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  将\_id 为 1 的文档的 nickname 字段重命名为 alias，cell 字段重命名为 mobile</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> \$rename<span class="token operator">:</span> <span class="token punctuation">{</span> nickname<span class="token operator">:</span> <span class="token string">&quot;alias&quot;</span><span class="token punctuation">,</span> cell<span class="token operator">:</span> <span class="token string">&quot;mobile&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><blockquote><h3 id="setoninsert"><a href="#setoninsert" class="header-anchor">#</a> $setOnInsert</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>collection<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span> <span class="token operator">&lt;</span>query<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$setOnInsert<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> upsert<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：配合 upsert 操作，在作为 insert 时可以为新文档扩展更多的 field</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  将\_id 为 1 的文档的 item 字段更改为 apple，并插入新字段 defaultQty，值为 100</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> $<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> item<span class="token operator">:</span> <span class="token string">&quot;apple&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> $setOnInsert<span class="token operator">:</span> <span class="token punctuation">{</span> defaultQty<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> upsert<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><h3 id="set"><a href="#set" class="header-anchor">#</a> $set</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$<span class="token keyword">set</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：更新文档中的某一个字段，而不是全部替换</p> <p>举例：</p> <p>假设现有文档：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>sex<span class="token operator">:</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果这样写：</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>sex<span class="token operator">:</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 则更改之后的结果是酱的：</span>
<span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>sex<span class="token operator">:</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">}</span>
<span class="token comment">// 若只想更改 sex 字段，可以这样写：</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>\$<span class="token keyword">set</span><span class="token operator">:</span><span class="token punctuation">{</span>sex<span class="token operator">:</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><h3 id="unset"><a href="#unset" class="header-anchor">#</a> $unset</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$unset<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：删除文档中的指定字段，若字段不存在则不操作</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  删除\_id 为 1 的文档的 name 字段</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$unset<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><h3 id="min"><a href="#min" class="header-anchor">#</a> $min</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$min<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：将文档中的某字段与指定值作比较，如果原值小于指定值，则不更新；若大于指定值，则更新</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  假设现有文档：</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> highScore<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> lowScore<span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span>
<span class="token comment">//  执行：</span>
 db<span class="token punctuation">.</span>scores<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$min<span class="token operator">:</span> <span class="token punctuation">{</span> lowScore<span class="token operator">:</span> <span class="token number">150</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">//  执行结果：</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> highScore<span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span> lowScore<span class="token operator">:</span> <span class="token number">150</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><h3 id="max"><a href="#max" class="header-anchor">#</a> $max</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$max<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：与$min 功能相反</p></blockquote> <h3 id="currentdate"><a href="#currentdate" class="header-anchor">#</a> $currentDate</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$currentDate<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>typeSpecification1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：设置指定字段为当前时间</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>db.person.update( { _id: 1 }, { $currentDate: { &quot;lastLogin&quot;: { $type: &quot;timestamp&quot; } } })</li></ol></blockquote> <h2 id="_2-2-数组更新"><a href="#_2-2-数组更新" class="header-anchor">#</a> 2.2 数组更新</h2> <h3 id="（update）"><a href="#（update）" class="header-anchor">#</a> $（update）</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;&lt;array&gt;.\$&quot;</span> <span class="token operator">:</span> value <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：请参考官网</p></blockquote> <h3 id="addtoset"><a href="#addtoset" class="header-anchor">#</a> $addToSet</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$ addToSet ： <span class="token punctuation">{</span> <span class="token operator">&lt;</span> field1 <span class="token operator">&gt;</span>： <span class="token operator">&lt;</span> value1 <span class="token operator">&gt;</span> ， <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：用于添加一个元素到 array 中，一般用于 update</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 假设现有文档：</span>
<span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> letters<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">// 执行：</span>
db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>\$addToSet<span class="token operator">:</span><span class="token punctuation">{</span>letters<span class="token operator">:</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 结果：</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;letters&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">// 执行：</span>
db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\_id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>\$addToSet<span class="token operator">:</span><span class="token punctuation">{</span>letters<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 结果：</span>
<span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;letters&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span> <span class="token punctuation">]</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">// 注意，若想让添加的多个元素分开成单个元素的效果，请参考\$each 的使用方法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><blockquote><h3 id="pop"><a href="#pop" class="header-anchor">#</a> $pop</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$pop<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">-</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：删除数组中的第一个或最后一个元素，-1 表示第一个，没错，第一个；1 表示最后一个！</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$pop<span class="token operator">:</span> <span class="token punctuation">{</span> letters<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="pullall"><a href="#pullall" class="header-anchor">#</a> $pullAll</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$pullAll<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：删除数组或内嵌文档字段中所有指定的元素</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  假设现有文档：</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> scores<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">//  执行：</span>
 db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$pullAll<span class="token operator">:</span> <span class="token punctuation">{</span> scores<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">//  结果：</span>
 <span class="token punctuation">{</span> <span class="token string">&quot;\_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;scores&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><h3 id="pull"><a href="#pull" class="header-anchor">#</a> $pull</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$pull<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value<span class="token operator">|</span>condition<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>field2<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value<span class="token operator">|</span>condition<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：删除满足条件的元素</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 假设现有文档：</span>
<span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> votes<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token comment">// 执行：</span>
db<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span> <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> $pull<span class="token operator">:</span> <span class="token punctuation">{</span> votes<span class="token operator">:</span> <span class="token punctuation">{</span> $gte<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">//  结果：</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> votes<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><blockquote><blockquote><p>更多用法及实例，请参考官网</p></blockquote> <h3 id="pushall"><a href="#pushall" class="header-anchor">#</a> $pushAll</h3> <blockquote><p>释义：自 v2.4 开始，方法弃用，请使用$push和$each 来配合实现</p></blockquote> <h3 id="push"><a href="#push" class="header-anchor">#</a> $push</h3> <blockquote><p>语法：</p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> \$push<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field1<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><blockquote><p>释义：往数组中追加指定的元素，若文档中数组不存在，则创建并添加指定元素，自 v2.4 起，添加了对$.each 的支持</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> \$push<span class="token operator">:</span> <span class="token punctuation">{</span> scores<span class="token operator">:</span> <span class="token number">89</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><blockquote><h3 id="each"><a href="#each" class="header-anchor">#</a> $each</h3> <blockquote><p>语法：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span> $addToSet<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $each<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span> <span class="token operator">...</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> $push<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span> $each<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span> <span class="token operator">...</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><blockquote><blockquote><p>释义：需要搭配$addToSet或$push 方可使用</p></blockquote> <h3 id="sort"><a href="#sort" class="header-anchor">#</a> $sort</h3> <blockquote><p>语法：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
  \$push<span class="token operator">:</span> <span class="token punctuation">{</span>
    ​ <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​ \$each<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ​ \$sort<span class="token operator">:</span> <span class="token operator">&lt;</span>sort specification<span class="token operator">&gt;</span>
    ​ <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><blockquote><blockquote><p>释义：自 v2.4 加，配合$push 使用，表示给文档中的指定数组元素排序，1 是升序，-1 是降序</p> <p>举例：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> db<span class="token punctuation">.</span>students<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>
 <span class="token punctuation">{</span> \_id<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    ​ \$push<span class="token operator">:</span> <span class="token punctuation">{</span>
      ​ quizzes<span class="token operator">:</span> <span class="token punctuation">{</span>
        ​ \$each<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> score<span class="token operator">:</span> <span class="token number">6</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
        ​ \$sort<span class="token operator">:</span> <span class="token punctuation">{</span> score<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
      ​ <span class="token punctuation">}</span>
  ​   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><blockquote><blockquote><h3 id="position"><a href="#position" class="header-anchor">#</a> $position</h3> <blockquote><p>语法：</p> <p>[plain]<a href="http://blog.csdn.net/qq_16313365/article/details/58599253#" target="_blank" rel="noopener noreferrer">view plain<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote></blockquote></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token punctuation">{</span>
  \$push<span class="token operator">:</span> <span class="token punctuation">{</span>
    ​ <span class="token operator">&lt;</span>field<span class="token operator">&gt;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ​ \$each<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    ​ \$position<span class="token operator">:</span> <span class="token operator">&lt;</span>num<span class="token operator">&gt;</span>
    ​ <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><blockquote><blockquote><p>释义：自 v2.6 加，配合$push 使用表示往数组元素中的指定位置插入元素</p></blockquote></blockquote></blockquote></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2020年11月26日星期四上午10点22分</span></div></footer> <!----> <!----> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-40a3448a><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-1-比较操作符" class="sidebar-link" data-v-40a3448a>1.1 比较操作符</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#eq" class="sidebar-link" data-v-40a3448a>\$eq</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#gt" class="sidebar-link" data-v-40a3448a>\$gt</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#gte" class="sidebar-link" data-v-40a3448a>\$gte</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#lt" class="sidebar-link" data-v-40a3448a>\$lt</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#lte" class="sidebar-link" data-v-40a3448a>\$lte</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#ne" class="sidebar-link" data-v-40a3448a>\$ne</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#in" class="sidebar-link" data-v-40a3448a>\$in</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#nin" class="sidebar-link" data-v-40a3448a>\$nin</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-2-逻辑操作符" class="sidebar-link" data-v-40a3448a>1.2 逻辑操作符</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#or" class="sidebar-link" data-v-40a3448a>\$or</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#and" class="sidebar-link" data-v-40a3448a>\$and</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#not" class="sidebar-link" data-v-40a3448a>\$not</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#nor" class="sidebar-link" data-v-40a3448a>\$nor</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-3-元素操作符" class="sidebar-link" data-v-40a3448a>1.3 元素操作符</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#exists" class="sidebar-link" data-v-40a3448a>\$exists</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#type" class="sidebar-link" data-v-40a3448a>\$type</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-4-评估操作符（evaluation，不知道翻译成什么合适，暂且翻译成这样吧）" class="sidebar-link" data-v-40a3448a>1.4 评估操作符（Evaluation，不知道翻译成什么合适，暂且翻译成这样吧）</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#mod" class="sidebar-link" data-v-40a3448a>\$mod</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#regex" class="sidebar-link" data-v-40a3448a>\$regex</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#text" class="sidebar-link" data-v-40a3448a>\$text</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#where" class="sidebar-link" data-v-40a3448a>\$where</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-5-geospatial-query-operators" class="sidebar-link" data-v-40a3448a>1.5 Geospatial Query Operators</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-6-数组操作符" class="sidebar-link" data-v-40a3448a>1.6 数组操作符</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#all" class="sidebar-link" data-v-40a3448a>\$all</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#elemmatch（query）" class="sidebar-link" data-v-40a3448a>\$elemMatch（query）</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#size" class="sidebar-link" data-v-40a3448a>\$size</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-7-bitwise-query-operators" class="sidebar-link" data-v-40a3448a>1.7 Bitwise Query Operators</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_1-8-投影操作符" class="sidebar-link" data-v-40a3448a>1.8 投影操作符</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#projection" class="sidebar-link" data-v-40a3448a>\$(projection)</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#elemmatch-projection" class="sidebar-link" data-v-40a3448a>\$elemMatch(projection)</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#meta" class="sidebar-link" data-v-40a3448a>\$meta</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#slice-projection" class="sidebar-link" data-v-40a3448a>\$slice(projection)</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_2-1-字段更新" class="sidebar-link" data-v-40a3448a>2.1 字段更新</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#inc" class="sidebar-link" data-v-40a3448a>\$inc</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#mul" class="sidebar-link" data-v-40a3448a>\$mul</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#rename" class="sidebar-link" data-v-40a3448a>\$rename</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#setoninsert" class="sidebar-link" data-v-40a3448a>\$setOnInsert</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#set" class="sidebar-link" data-v-40a3448a>\$set</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#unset" class="sidebar-link" data-v-40a3448a>\$unset</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#min" class="sidebar-link" data-v-40a3448a>\$min</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#max" class="sidebar-link" data-v-40a3448a>\$max</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#currentdate" class="sidebar-link" data-v-40a3448a>\$currentDate</a></li><li class="level-2" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#_2-2-数组更新" class="sidebar-link" data-v-40a3448a>2.2 数组更新</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#（update）" class="sidebar-link" data-v-40a3448a>\$（update）</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#addtoset" class="sidebar-link" data-v-40a3448a>\$addToSet</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#pop" class="sidebar-link" data-v-40a3448a>\$pop</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#pullall" class="sidebar-link" data-v-40a3448a>\$pullAll</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#pull" class="sidebar-link" data-v-40a3448a>\$pull</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#pushall" class="sidebar-link" data-v-40a3448a>\$pushAll</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#push" class="sidebar-link" data-v-40a3448a>\$push</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#each" class="sidebar-link" data-v-40a3448a>\$each</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#sort" class="sidebar-link" data-v-40a3448a>\$sort</a></li><li class="level-3" data-v-40a3448a><a href="/docs/database/MongoDB%E7%9A%84%E6%93%8D%E4%BD%9C%E7%AC%A6.html#position" class="sidebar-link" data-v-40a3448a>\$position</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:168px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:1;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/assets/js/app.7fe1ffb5.js" defer></script><script src="/assets/js/3.788743b5.js" defer></script><script src="/assets/js/1.29b2523c.js" defer></script><script src="/assets/js/42.4096bff8.js" defer></script><script src="/assets/js/14.37268bde.js" defer></script>
  </body>
</html>
